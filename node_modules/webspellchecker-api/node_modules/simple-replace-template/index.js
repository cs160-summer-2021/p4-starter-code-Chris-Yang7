module.exports = function simpleTemplate(str, _data){
	
	function replaceRegular(string) {
		return string.replace(/(<%=)|(%>)/g,'');
	}
    var result =  str.replace(/<%=([^%>]+)?%>/g,function(m,key) {
		if(m.indexOf('<%=') === -1) {
			return m;
		}
		var nestedKeys = replaceRegular(m.trim()).split('.'),
			data = Object.assign({}, _data);
		if(nestedKeys.length > 1) {
			nestedKeys.map(k=>{
				k = k.trim();
				if(data){
					data = data[k];
				} else {
					return m;
				}
			});
			return (data) ? data : m;
		} else {
			key = key.trim();
			return data.hasOwnProperty(key)?data[key]:m;
		}
	});
	
	return result;
};